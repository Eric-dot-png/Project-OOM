@startuml
participant "Server" as C_0007168929316485241399
[-> C_0007168929316485241399 : onNewConnection()
activate C_0007168929316485241399
participant "Server::onNewConnection()::(lambda src/Server.cpp:68:57)" as C_0016001232905915656125
C_0007168929316485241399 -> C_0016001232905915656125 : operator()() const
activate C_0016001232905915656125
participant "ProtocolManager" as C_0016429213831703395188
C_0016001232905915656125 -> C_0016429213831703395188 : __deserialize(const QByteArray &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QJsonObject//
deactivate C_0016429213831703395188
group switch
else class ProtocolManager::PrivateMessageForward
participant "User" as C_0013909460443608576024
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
participant "dbHandler" as C_0007180728308577750051
C_0016001232905915656125 -> C_0007180728308577750051 : availUsername(const User &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
alt p == usermap.end() && !exists
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else p == usermap.end()
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else class ProtocolManager::LoginRequest
participant "pwdHash(const QString &)" as C_0007920088499328027200
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt db->loginValidate(u)
C_0016001232905915656125 -> C_0007180728308577750051 : **[**loginValidate(const User &)**]**
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else class ProtocolManager::CreateAccountAuthCodeSubmit
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt !numeric(code) || code.length() != 6
C_0016001232905915656125 -> C_0007168929316485241399 : **[**numeric(const QString &) const**]**
activate C_0007168929316485241399
C_0007168929316485241399 --> C_0016001232905915656125 : //bool//
deactivate C_0007168929316485241399
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : emailValidate(const User &,const QString &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
alt success
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
end
else class ProtocolManager::CreateAccountRequest
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt !db->availUsername(u)
C_0016001232905915656125 -> C_0007180728308577750051 : **[**availUsername(const User &)**]**
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : newUser(const User &,bool)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //QString//
deactivate C_0007180728308577750051
alt code != ""
C_0016001232905915656125 -> C_0013909460443608576024 : get_email() const
activate C_0013909460443608576024
C_0013909460443608576024 --> C_0016001232905915656125 : //QString//
deactivate C_0013909460443608576024
alt email == 0
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : removeReg(const User &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
end
else class ProtocolManager::AnnounceIpPort
end
deactivate C_0016001232905915656125
deactivate C_0007168929316485241399
[-> C_0016001232905915656125 : operator()() const
activate C_0016001232905915656125
C_0016001232905915656125 -> C_0016429213831703395188 : __deserialize(const QByteArray &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QJsonObject//
deactivate C_0016429213831703395188
group switch
else class ProtocolManager::PrivateMessageForward
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
C_0016001232905915656125 -> C_0007180728308577750051 : availUsername(const User &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
alt p == usermap.end() && !exists
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else p == usermap.end()
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else class ProtocolManager::LoginRequest
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt db->loginValidate(u)
C_0016001232905915656125 -> C_0007180728308577750051 : **[**loginValidate(const User &)**]**
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else class ProtocolManager::CreateAccountAuthCodeSubmit
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt !numeric(code) || code.length() != 6
C_0016001232905915656125 -> C_0007168929316485241399 : **[**numeric(const QString &) const**]**
activate C_0007168929316485241399
C_0007168929316485241399 --> C_0016001232905915656125 : //bool//
deactivate C_0007168929316485241399
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : emailValidate(const User &,const QString &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
alt success
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
end
else class ProtocolManager::CreateAccountRequest
C_0016001232905915656125 -> C_0007920088499328027200 : 
activate C_0007920088499328027200
C_0007920088499328027200 --> C_0016001232905915656125 : //QString//
deactivate C_0007920088499328027200
C_0016001232905915656125 -> C_0013909460443608576024 : User(const QString &,const QString &,const QString &,bool)
activate C_0013909460443608576024
deactivate C_0013909460443608576024
alt !db->availUsername(u)
C_0016001232905915656125 -> C_0007180728308577750051 : **[**availUsername(const User &)**]**
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : newUser(const User &,bool)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //QString//
deactivate C_0007180728308577750051
alt code != ""
C_0016001232905915656125 -> C_0013909460443608576024 : get_email() const
activate C_0013909460443608576024
C_0013909460443608576024 --> C_0016001232905915656125 : //QString//
deactivate C_0013909460443608576024
alt email == 0
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
else
C_0016001232905915656125 -> C_0007180728308577750051 : removeReg(const User &)
activate C_0007180728308577750051
C_0007180728308577750051 --> C_0016001232905915656125 : //bool//
deactivate C_0007180728308577750051
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
else
C_0016001232905915656125 -> C_0016429213831703395188 : __serialize(MessageType,const QStringList &)__
activate C_0016429213831703395188
C_0016429213831703395188 --> C_0016001232905915656125 : //QByteArray//
deactivate C_0016429213831703395188
end
end
else class ProtocolManager::AnnounceIpPort
end
deactivate C_0016001232905915656125

'Generated with clang-uml, version 0.6.0
'LLVM version clang version 18.1.8 (Fedora 18.1.8-1.fc40)
@enduml
